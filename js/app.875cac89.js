(function(){"use strict";var e={7:function(e,s,t){var o=t(963),n=t(252);const a={class:"w-screen min-h-screen bg-gray-200"},l={class:"fixed z-40 inline-flex w-full shadow-md p-3 px-40 bg-white text-gray-900 font-serif text-lg"},r=(0,n._)("h1",{class:"font-roboto text-primary font-semibold text-xl"},"Lessons",-1),i=(0,n._)("i",{class:"fas fa-shopping-cart"},null,-1),c=(0,n.Uk)(" Cart "),d=[i,c],u={key:1,class:"ml-auto text-gray-500 font-sans",disabled:""},h=(0,n._)("i",{class:"fas fa-shopping-cart"},null,-1),p=(0,n.Uk)(" Cart "),b=[h,p],f=(0,n.uE)('<div class="w-full grid grid-cols-2 gap-10 p-20 pt-32"><div class="inline-flex"><img src="bg.jpeg" alt="" class="w-full h-auto rounded-lg"></div><div class="w-full font-roboto py-10"><h1 class="text-left font-bold text-4xl max-w-sm"> Find All Your Lessons In One Place </h1><br><p class="max-w-md"> Lorem ipsum dolor sit amet consectetur adipisicing elit. Aspernatur perspiciatis animi voluptas corporis, numquam facilis id veritatis, totam maiores dolor necessitatibus voluptatem ea? Officia dolor commodi aliquid aliquam consectetur fugiat? </p></div></div>',1),m={class:"w-full bg-white p-10"},g=(0,n._)("h1",{class:"text-center font-roboto font-bold text-3xl"}," Available Courses ",-1),w={class:"inline-flex w-full"},y={id:"orderByBtn",class:"group relative w-40 border p-2 rounded-md bg-gray-200"},v=(0,n.Uk)(" Order By "),k=(0,n._)("span",{class:"px-2"},null,-1),C=(0,n._)("i",{class:"fas fa-arrow-down"},null,-1),_={class:"absolute z-10 w-full h-auto border shadow-md mt-2 left-0 bg-gray-200 rounded-lg transition-all opacity-0 group-hover:opacity-100"},L={id:"sortByBtn",class:"group relative ml-auto w-40 border p-2 rounded-md bg-gray-200"},x=(0,n.Uk)(" Sort By "),j=(0,n._)("span",{class:"px-2"},null,-1),V=(0,n._)("i",{class:"fas fa-arrow-down"},null,-1),D={class:"absolute z-10 w-full h-auto border shadow-md mt-2 left-0 bg-gray-200 rounded-lg transition-all opacity-0 group-hover:opacity-100"},O=(0,n._)("br",null,null,-1),B=(0,n._)("br",null,null,-1),A={class:"w-full text-center"},S=(0,n._)("br",null,null,-1),P=(0,n._)("br",null,null,-1),U={key:0},T={key:1};function $(e,s,t,i,c,h){const p=(0,n.up)("checkout-component"),$=(0,n.up)("lessons-child");return(0,n.wg)(),(0,n.iD)("div",a,[(0,n.Wm)(p,{cart:c.cart,onProcessCheckout:h.onSubmitCheckout,onRemoveFromCart:h.deleteItemFromCart},null,8,["cart","onProcessCheckout","onRemoveFromCart"]),(0,n._)("div",l,[r,h.cartHasItems?((0,n.wg)(),(0,n.iD)("button",{key:0,onClick:s[0]||(s[0]=(...e)=>h.showSidebar&&h.showSidebar(...e)),class:"ml-auto text-gray-700 hover:text-gray-900 font-sans"},d)):((0,n.wg)(),(0,n.iD)("button",u,b))]),f,(0,n._)("div",m,[g,(0,n._)("div",w,[(0,n._)("button",y,[v,k,C,(0,n._)("div",_,[(0,n._)("p",{class:"bg-white hover:bg-gray-100 p-2",onClick:s[1]||(s[1]=(...e)=>h.sortAscending&&h.sortAscending(...e))}," Ascending "),(0,n._)("p",{class:"bg-white hover:bg-gray-100 p-2",onClick:s[2]||(s[2]=(...e)=>h.sortDescending&&h.sortDescending(...e))}," Descending ")])]),(0,n._)("button",L,[x,j,V,(0,n._)("div",D,[(0,n._)("p",{class:"bg-white hover:bg-gray-100 p-2",onClick:s[3]||(s[3]=e=>h.sortLessons("subject"))}," Subject "),(0,n._)("p",{class:"bg-white hover:bg-gray-100 p-2",onClick:s[4]||(s[4]=e=>h.sortLessons("location"))}," Location "),(0,n._)("p",{class:"bg-white hover:bg-gray-100 p-2",onClick:s[5]||(s[5]=e=>h.sortLessons("price"))}," Price "),(0,n._)("p",{class:"bg-white hover:bg-gray-100 p-2",onClick:s[6]||(s[6]=e=>h.sortLessons("spaces"))}," Availability ")])])]),O,B,(0,n._)("div",A,[(0,n.wy)((0,n._)("input",{type:"search",placeholder:"Search...",class:"w-96 p-2 px-5 rounded-md border","onUpdate:modelValue":s[7]||(s[7]=e=>c.search=e)},null,512),[[o.nr,c.search]])]),S,P,h.searchLessonsHasLessons?((0,n.wg)(),(0,n.iD)("div",U,[(0,n.Wm)($,{lessons:this.searchLessons,onAddProduct:h.addToCart},null,8,["lessons","onAddProduct"])])):((0,n.wg)(),(0,n.iD)("div",T,[(0,n.Wm)($,{lessons:this.lessons,onAddProduct:h.addToCart},null,8,["lessons","onAddProduct"])]))])])}var z=t(577);const F={key:0},H={class:"grid grid-cols-3 gap-4"},I=["src"],q={class:"p-2"},N={class:"p-1 text-center"},E={class:"p-1"},W=(0,n._)("strong",null,"Location: ",-1),X={class:"p-1"},Y=(0,n._)("strong",null,"Price: ",-1),Z={class:"p-1"},J=(0,n._)("strong",null,"Spaces: ",-1),K=(0,n._)("br",null,null,-1),R=["onClick"],M={key:1,disabled:"",class:"w-full rounded-md p-2 text-sm font-roboto bg-blue-500 text-white"},Q={key:1};function G(e,s,t,o,a,l){return l.lessonsHasLessons?((0,n.wg)(),(0,n.iD)("div",F,[(0,n._)("div",H,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.lessons,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{key:s,class:"inline-flex w-full border rounded-lg p-3"},[(0,n._)("img",{src:e.image,alt:"subject",class:"h-48 w-48"},null,8,I),(0,n._)("div",q,[(0,n._)("p",N,[(0,n._)("strong",null,(0,z.zw)(e.subject),1)]),(0,n._)("p",E,[W,(0,n.Uk)(" "+(0,z.zw)(e.location),1)]),(0,n._)("p",X,[Y,(0,n.Uk)(" $"+(0,z.zw)(e.price),1)]),(0,n._)("p",Z,[J,(0,n.Uk)(" "+(0,z.zw)(e.spaces),1)]),K,l.canAddToCart(e)?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"w-full rounded-md p-2 text-sm font-roboto bg-blue-600 text-white hover:bg-blue-700",onClick:s=>l.addProduct(e)}," Add to Cart ",8,R)):((0,n.wg)(),(0,n.iD)("button",M," Add to Cart "))])])))),128))])])):((0,n.wg)(),(0,n.iD)("div",Q,"No Lessons Found"))}var ee={name:"LessonsChild",props:{lessons:{type:Object}},methods:{addProduct(e){this.$emit("addProduct",e)},canAddToCart(e){return e.spaces>0}},computed:{lessonsHasLessons(){return this.lessons.length>0||void 0!=this.lessons}}},se=t(744);const te=(0,se.Z)(ee,[["render",G]]);var oe=te;const ne={id:"sidebar",class:"fixed z-50 w-80 right-0 top-0 h-screen bg-gray-50 p-5 overflow-auto shadow-md transition-all transform translate-x-96 duration-500 opacity-0 invisible"},ae={class:"inline-flex w-full p-3"},le=(0,n._)("h1",{class:"font-roboto font-bold text-xl"},"Cart",-1),re=(0,n._)("hr",null,null,-1),ie=(0,n._)("br",null,null,-1),ce={key:0,class:"w-full"},de=["src"],ue={class:"pl-4 py-2 w-full"},he=(0,n._)("strong",null,"Subject:",-1),pe={class:"pb-3"},be=(0,n._)("strong",null,"Quantity:",-1),fe=["onClick"],me=(0,n._)("i",{class:"fas fa-trash-alt"},null,-1),ge=[me],we={class:"p-3"},ye=(0,n._)("label",{for:""},"Name",-1),ve=(0,n._)("label",{for:""},"Phone Number",-1),ke=(0,n._)("br",null,null,-1),Ce=(0,n._)("br",null,null,-1),_e={key:1,disabled:"",class:"bg-blue-400 rounded-md text-white w-full p-2"};function Le(e,s,t,a,l,r){return(0,n.wg)(),(0,n.iD)("div",ne,[(0,n._)("div",ae,[le,(0,n._)("button",{type:"button",onClick:s[0]||(s[0]=(...e)=>r.hideSidebar&&r.hideSidebar(...e)),class:"ml-auto font-bold"}," X ")]),re,ie,r.cartHasItems?((0,n.wg)(),(0,n.iD)("div",ce,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.cart,((e,s)=>((0,n.wg)(),(0,n.iD)("div",{key:s,class:"inline-flex w-full py-2 pb-5"},[(0,n._)("img",{src:e.image,class:"w-28 h-28 rounded-md",alt:""},null,8,de),(0,n._)("div",ue,[(0,n._)("p",null,[he,(0,n.Uk)(" "+(0,z.zw)(e.subject),1)]),(0,n._)("p",pe,[be,(0,n.Uk)(" "+(0,z.zw)(e.quantity),1)]),(0,n._)("button",{onClick:e=>r.removeFromCart(s),class:"bg-red-500 w-full rounded-md text-white p-1"},ge,8,fe)])])))),128)),(0,n._)("div",we,[ye,(0,n.wy)((0,n._)("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=e=>l.name=e),class:"p-2 w-full border rounded-md"},null,512),[[o.nr,l.name]]),ve,(0,n.wy)((0,n._)("input",{type:"number","onUpdate:modelValue":s[2]||(s[2]=e=>l.number=e),class:"p-2 w-full border rounded-md"},null,512),[[o.nr,l.number]]),ke,Ce,l.dataValidated?((0,n.wg)(),(0,n.iD)("button",{key:0,class:"bg-blue-500 hover:bg-blue-600 rounded-md text-white w-full p-2",onClick:s[3]||(s[3]=e=>r.processCheckout(l.name,l.number))}," Proceed to Checkout ")):((0,n.wg)(),(0,n.iD)("button",_e," Proceed to Checkout "))])])):(0,n.kq)("",!0)])}var xe={name:"CheckoutComponent",props:{cart:{type:Object}},data(){return{dataValidated:!1,nameValidated:!1,numberValidated:!1,name:"",number:""}},methods:{hideSidebar:function(){const e=document.getElementById("sidebar");e.style.visibility="invisible",e.style.opacity=0,e.style.transform="translateX(20rem)"},isDataValidated(){console.log("fired"),this.numberValidated&&this.nameValidated?(this.dataValidated=!0,console.log("data validated")):(this.dataValidated=!1,console.log("data not validated"),console.log(this.numberValidated),console.log(this.nameValidated))},removeFromCart(e){this.$emit("removeFromCart",e)},processCheckout(e,s){this.$emit("processCheckout",{name:e,number:s})}},watch:{number:function(e){var s=/^\d{10}$/;String(e).match(s)?this.numberValidated=!0:this.numberValidated=!1,this.isDataValidated()},name:function(e){console.log("watching Name");let s=/\d+/g;e.match(s)?(this.nameValidated=!1,console.log("found number")):(this.nameValidated=!0,console.log("not found number")),this.isDataValidated()}},computed:{cartHasItems(){return this.cart.length>0}}};const je=(0,se.Z)(xe,[["render",Le]]);var Ve=je,De={name:"App",components:{LessonsChild:oe,CheckoutComponent:Ve},data(){return{lessons:[],orderBy:0,sortBy:"",cart:[],name:"",number:"",nameValidated:!1,numberValidated:!1,dataValidated:!1,search:"",searchLessons:[]}},watch:{search:function(e){console.log("searching"),console.log("value: "+e),this.searchLessons=[],""==e||null==e?(console.log("searching empty value"),this.searchLessons=[]):fetch(`https://web-individual-coursework-2.herokuapp.com/search/${e}`,{method:"get",mode:"cors",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log(e),this.searchLessons.push(e[0]),console.log(this.searchLessons)})),console.log(this.searchLessons)},number:function(e){var s=/^\d{10}$/;e.match(s)?this.numberValidated=!0:this.numberValidated=!1,this.isDataValidated()},name:function(e){let s=/\d+/g;e.match(s)?(this.nameValidated=!1,console.log("found number")):(this.nameValidated=!0,console.log("not found number")),this.isDataValidated()}},beforeMount(){this.fetchLessons()},methods:{fetchLessons:function(){fetch("https://web-individual-coursework-2.herokuapp.com/lessons/",{method:"get",mode:"cors",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{console.log(e),this.lessons=e}))},onSubmitCheckout:function(e){this.cart.forEach((s=>{console.log(s);const t={name:e.name,phoneNo:e.number,lessonId:s.id,noOfSpaces:s.quantity};console.log(t),fetch("https://web-individual-coursework-2.herokuapp.com/order/",{method:"post",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((()=>{const e={spaces:s.spacesLeft};fetch(`https://web-individual-coursework-2.herokuapp.com/lesson/${s.id}`,{method:"put",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>console.log(e)))}))})),this.cart=[],this.name="",this.number="",alert("Checkout Complete"),this.hideSidebar()},showSidebar:function(){const e=document.getElementById("sidebar");e.style.visibility="visible",e.style.opacity=1,e.style.transform="translateX(0)"},addToCart:function(e){if(e.spaces>0){console.log(this.lessons.indexOf(e));var s=!1,t=0,o=0;for(var n in this.cart)console.log(this.cart[n].id),console.log(e._id),this.cart[n].id==e._id&&(s=!0,t=o,console.log("found")),o++;s?(this.cart[t].quantity+=1,this.cart[t].spacesLeft-=1):this.cart.push({id:e._id,subject:e.subject,image:e.image,quantity:1,spacesLeft:this.lessons[this.lessons.indexOf(e)].spaces-1}),this.lessons[this.lessons.indexOf(e)].spaces-=1}else alert("No more items available")},canAddToCart(e){return e.spaces>0},sortAscending:function(){if(1==this.orderBy){switch(console.log(this.sortBy),this.sortBy){case"subject":this.lessons.sort((function(e,s){let t=e.subject.toLowerCase(),o=s.subject.toLowerCase();return t<o?-1:t>o?1:0}));break;case"location":this.lessons.sort((function(e,s){let t=e.location.toLowerCase(),o=s.location.toLowerCase();return t<o?-1:t>o?1:0}));break;case"price":this.lessons.sort((function(e,s){return e.price-s.price}));break;case"spaces":this.lessons.sort((function(e,s){return e.spaces-s.spaces}));break;default:this.lessons.sort((function(e,s){let t=e.subject.toLowerCase(),o=s.subject.toLowerCase();return t<o?-1:t>o?1:0})),console.log("default");break}this.orderBy=0,this.$forceUpdate()}},sortDescending:function(){if(0==this.orderBy){switch(this.sortBy){case"subject":this.lessons.sort((function(e,s){let t=e.subject.toLowerCase(),o=s.subject.toLowerCase();return t>o?-1:t<o?1:0}));break;case"location":this.lessons.sort((function(e,s){let t=e.location.toLowerCase(),o=s.location.toLowerCase();return t>o?-1:t<o?1:0}));break;case"price":this.lessons.sort((function(e,s){return s.price-e.price}));break;case"spaces":this.lessons.sort((function(e,s){return s.spaces-e.spaces}));break;default:this.lessons.sort((function(e,s){let t=e.subject.toLowerCase(),o=s.subject.toLowerCase();return t>o?-1:t<o?1:0})),console.log("default");break}this.orderBy=1,console.log(this.lessons),this.$forceUpdate(),console.log("fired")}},sortLessons:function(e){switch(e){case"subject":this.sortBy="subject",this.lessons.sort((function(e,s){let t=e.subject.toLowerCase(),o=s.subject.toLowerCase();return t<o?-1:t>o?1:0}));break;case"location":this.sortBy="location",this.lessons.sort((function(e,s){let t=e.location.toLowerCase(),o=s.location.toLowerCase();return t<o?-1:t>o?1:0}));break;case"price":this.sortBy="price",this.lessons.sort((function(e,s){return e.price-s.price}));break;case"spaces":this.sortBy="spaces",this.lessons.sort((function(e,s){return e.spaces-s.spaces}));break;default:console.log("default");break}this.$forceUpdate()},deleteItemFromCart:function(e){const s=this.cart[e];for(var t in console.log(s),this.cart.splice(e,1),this.lessons)this.lessons[t]._id==s.id&&(console.log("found"),this.lessons[t].spaces+=s.quantity)},isDataValidated(){console.log("fired"),this.numberValidated&&this.nameValidated?(this.dataValidated=!0,console.log("data validated")):(this.dataValidated=!1,console.log("data not validated"),console.log(this.numberValidated),console.log(this.nameValidated))}},computed:{getLessons(){return this.lessons},cartHasItems(){return this.cart.length>0},searchLessonsHasLessons(){return this.searchLessons.length>0?(console.log("has lessons"),!0):(console.log("does not have lessons"),!1)}}};const Oe=(0,se.Z)(De,[["render",$]]);var Be=Oe;(0,o.ri)(Be).mount("#app")}},s={};function t(o){var n=s[o];if(void 0!==n)return n.exports;var a=s[o]={exports:{}};return e[o](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(s,o,n,a){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],a=e[d][2];for(var r=!0,i=0;i<o.length;i++)(!1&a||l>=a)&&Object.keys(t.O).every((function(e){return t.O[e](o[i])}))?o.splice(i--,1):(r=!1,a<l&&(l=a));if(r){e.splice(d--,1);var c=n();void 0!==c&&(s=c)}}return s}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,n,a]}}(),function(){t.d=function(e,s){for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,o){var n,a,l=o[0],r=o[1],i=o[2],c=0;if(l.some((function(s){return 0!==e[s]}))){for(n in r)t.o(r,n)&&(t.m[n]=r[n]);if(i)var d=i(t)}for(s&&s(o);c<l.length;c++)a=l[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},o=self["webpackChunkafter_school"]=self["webpackChunkafter_school"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(7)}));o=t.O(o)})();
//# sourceMappingURL=app.875cac89.js.map